<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TESTE DISC - Secretaria de Habita√ß√£o</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --pantone-black: #2D2926;
            --pantone-red: #DA291C;
            --pantone-blue: #0033A0;
            --pantone-yellow: #FFCD00;
        }
        .nav-item {
    padding: 1rem 1.5rem;
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.875rem;
    border-bottom: 2px solid transparent;
    transition: all 0.3s ease-in-out;
}

.nav-item:hover {
    border-bottom: 2px solid #facc15; /* substitua pela sua cor pantone */
    color: #facc15;
}
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        .bg-pantone-blue { background-color: var(--pantone-blue); }
        .text-pantone-blue { color: var(--pantone-blue); }
        .hover-nav:hover { background-color: rgba(0,0,0,0.2); }
        .card-shadow { box-shadow: 0 4px 20px rgba(0,0,0,0.08); transition: transform 0.2s; }
        .card-shadow:hover { transform: translateY(-5px); }
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .hidden-section { display: none; }
        .progress-bar { transition: width 0.3s ease; }
    </style>
</head>
<body class="text-slate-800">

    <!-- HEADER -->
    <header class="bg-pantone-blue text-white py-4 px-6 shadow-lg">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
            <img src="brasao-mogi.png" alt="Bras√£o Mogi" class="h-20 object-contain bg-white p-1 rounded">
            <div class="text-center">
                <h1 class="text-3xl md:text-4xl font-extrabold tracking-tighter">TESTE DISC</h1>
                <p class="text-sm md:text-base font-semibold opacity-90">Secretaria Municipal de Habita√ß√£o e Regulariza√ß√£o Fundi√°ria</p>
            </div>
            <img src="DISC-eixos.png" alt="Eixos DISC" class="h-20 object-contain bg-white p-1 rounded">
        </div>
    </header>

    <!-- NAVIGATION -->
<nav class="bg-slate-900 text-white sticky top-0 z-50 shadow-md">
    
    <div class="max-w-7xl mx-auto flex items-center justify-between px-4">

        <!-- Logo ou T√≠tulo -->
        <div class="py-4 font-bold uppercase tracking-wider">
        
        </div>

        <!-- Bot√£o Mobile -->
        <button id="menu-btn" class="md:hidden text-2xl focus:outline-none">
            ‚ò∞
        </button>

        <!-- Menu -->
        <div id="menu" class="hidden md:flex flex-col md:flex-row md:items-center w-full md:w-auto absolute md:static top-16 left-0 bg-slate-900 md:bg-transparent transition-all duration-300 ease-in-out">

            <button onclick="showSection('home')" class="nav-item">
                In√≠cio
            </button>

            <button onclick="showSection('explica√ß√£o')" class="nav-item">
                Explica√ß√£o
            </button>

            <button onclick="showSection('famosos')" class="nav-item">
                Famosos
            </button>

            <button onclick="showSection('teste')" class="nav-item">
                O Teste
            </button>

            <button onclick="showSection('dashboard')" class="nav-item">
                Dashboard
            </button>

        </div>
    </div>
</nav>

    <!-- MAIN CONTENT -->
    <main class="max-w-7xl mx-auto py-10 px-6 min-h-[60vh]">
        
        <!-- SECTION: HOME / CARDS -->
        <section id="section-home" class="fade-in">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Card Explica√ß√£o -->
                <div onclick="showSection('explica√ß√£o')" class="cursor-pointer p-8 rounded-2xl bg-blue-50 card-shadow border-b-4 border-blue-400">
                    <h3 class="text-xl font-bold mb-3 text-blue-900">O que √© DISC?</h3>
                    <p class="text-sm text-blue-800 opacity-80">Entenda a metodologia e como os perfis comportamentais influenciam sua carreira.</p>
                </div>
                <!-- Card Famosos -->
                <div onclick="showSection('famosos')" class="cursor-pointer p-8 rounded-2xl bg-fuchsia-50 card-shadow border-b-4 border-fuchsia-400">
                    <h3 class="text-xl font-bold mb-3 text-fuchsia-900">Exemplos Famosos</h3>
                    <p class="text-sm text-fuchsia-800 opacity-80">Veja quais figuras p√∫blicas compartilham o mesmo perfil que voc√™.</p>
                </div>
                <!-- Card Teste -->
                <div onclick="showSection('teste')" class="cursor-pointer p-8 rounded-2xl bg-orange-50 card-shadow border-b-4 border-orange-400">
                    <h3 class="text-xl font-bold mb-3 text-orange-900">Fazer o Teste</h3>
                    <p class="text-sm text-orange-800 opacity-80">Responda 40 quest√µes r√°pidas e descubra sua domin√¢ncia comportamental.</p>
                </div>
                <!-- Card Dashboard -->
                <div onclick="showSection('dashboard')" class="cursor-pointer p-8 rounded-2xl bg-emerald-50 card-shadow border-b-4 border-emerald-400">
                    <h3 class="text-xl font-bold mb-3 text-emerald-900">Seus Resultados</h3>
                    <p class="text-sm text-emerald-800 opacity-80">Acompanhe seu hist√≥rico de avalia√ß√µes e evolu√ß√£o de perfil.</p>
                </div>
            </div>
        </section>

        <!-- SECTION: EXPLICA√á√ÉO -->
        <section id="section-explica√ß√£o" class="hidden-section fade-in">
            <div class="bg-white p-8 rounded-2xl shadow-sm border border-slate-100 max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold mb-6 text-pantone-blue">Entendendo a Metodologia DISC</h2>
                <div class="prose prose-slate max-w-none space-y-4">
                    <p>A metodologia DISC √© uma ferramenta de avalia√ß√£o comportamental que classifica as pessoas em quatro tipos principais de personalidade. N√£o existe perfil "melhor" ou "pior"; o objetivo √© entender tend√™ncias de comportamento.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
                        <div class="p-4 bg-red-50 rounded-lg"><strong class="text-red-700">D - Domin√¢ncia:</strong> Foco em resultados, desafios e efici√™ncia. S√£o diretos e competitivos.</div>
                        <div class="p-4 bg-yellow-50 rounded-lg"><strong class="text-yellow-700">I - Influ√™ncia:</strong> Foco em pessoas, otimismo e entusiasmo. S√£o comunicativos e persuasivos.</div>
                        <div class="p-4 bg-green-50 rounded-lg"><strong class="text-green-700">S - Estabilidade:</strong> Foco em processos, paci√™ncia e harmonia. S√£o leais e bons ouvintes.</div>
                        <div class="p-4 bg-blue-50 rounded-lg"><strong class="text-blue-700">C - Conformidade:</strong> Foco em precis√£o, l√≥gica e qualidade. S√£o detalhistas e anal√≠ticos.</div>
                    </div>
                    <p class="font-semibold text-lg mt-6">Dicas para o Teste:</p>
                    <ul class="list-disc pl-6 space-y-2">
                        <li>N√£o h√° resposta certa ou errada.</li>
                        <li>Seja honesto consigo mesmo; responda o que voc√™ <strong>√©</strong>, n√£o o que gostaria de ser.</li>
                        <li>Escolha a palavra que melhor descreve voc√™ no ambiente de trabalho.</li>
                    </ul>
                </div>
                <button onclick="showSection('teste')" class="mt-8 bg-pantone-blue text-white px-8 py-3 rounded-full font-bold hover:opacity-90 transition">Come√ßar Teste Agora</button>
            </div>
        </section>

        <!-- SECTION: FAMOSOS -->
        <section id="section-famosos" class="hidden-section fade-in">
            <h2 class="text-3xl font-bold mb-8 text-center text-slate-800">Perfis DISC de Grandes Personalidades</h2>
            <h3 class="text-3xl font-regular mb-8 text-center text-slate-800">Pessoas famosas e o seu perfil de personalidade.</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 text-center">
                <div class="bg-white p-6 rounded-2xl shadow-sm border-t-4 border-red-500">
                    <div class="text-4xl mb-4 text-red-500 font-black">D</div>
                    <h4 class="font-bold text-lg">Dominantes</h4>
                    <p class="text-sm italic mb-4">"Vim para vencer."</p>
                    <ul class="text-sm space-y-2 font-medium">
                        <li>Steve Jobs</li>
                        <li>Donald Trump</li>
                        <li>Hillary Clinton</li>
                        <li>Gordon Ramsay</li>
                    </ul>
                </div>
                <div class="bg-white p-6 rounded-2xl shadow-sm border-t-4 border-yellow-500">
                    <div class="text-4xl mb-4 text-yellow-500 font-black">I</div>
                    <h4 class="font-bold text-lg">Influentes</h4>
                    <p class="text-sm italic mb-4">"Vamos fazer juntos!"</p>
                    <ul class="text-sm space-y-2 font-medium">
                        <li>Bill Clinton</li>
                        <li>Will Smith</li>
                        <li>Ellen DeGeneres</li>
                        <li>Jim Carrey</li>
                    </ul>
                </div>
                <div class="bg-white p-6 rounded-2xl shadow-sm border-t-4 border-green-500">
                    <div class="text-4xl mb-4 text-green-500 font-black">S</div>
                    <h4 class="font-bold text-lg">Est√°veis</h4>
                    <p class="text-sm italic mb-4">"Harmonia em primeiro lugar."</p>
                    <ul class="text-sm space-y-2 font-medium">
                        <li>Walt Disney</li>
                        <li>Angelina Jolie</li>
                        <li>Princesa Diana</li>
                        <li>Jimmy Carter</li>
                    </ul>
                </div>
                <div class="bg-white p-6 rounded-2xl shadow-sm border-t-4 border-blue-500">
                    <div class="text-4xl mb-4 text-blue-500 font-black">C</div>
                    <h4 class="font-bold text-lg">Conformes</h4>
                    <p class="text-sm italic mb-4">"A qualidade est√° nos detalhes."</p>
                    <ul class="text-sm space-y-2 font-medium">
                        <li>Bill Gates</li>
                        <li>Albert Einstein</li>
                        <li>Mark Zuckerberg</li>
                        <li>Kevin Costner</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- SECTION: O TESTE -->
        <section id="section-teste" class="hidden-section fade-in">
            <div class="max-w-2xl mx-auto bg-white p-8 rounded-2xl shadow-xl">
                <div class="mb-6">
                    <div class="flex justify-between text-xs font-bold text-slate-400 mb-2 uppercase">
                        <span>Progresso</span>
                        <span id="progress-text">Quest√£o 1 de 40</span>
                    </div>
                    <div class="w-full bg-slate-100 h-2 rounded-full overflow-hidden">
                        <div id="progress-bar" class="bg-pantone-blue h-full progress-bar" style="width: 2.5%;"></div>
                    </div>
                </div>
                
                <h3 class="text-xl font-bold mb-6 text-center">Qual dessas palavras melhor descreve voc√™?</h3>
                
                <div id="options-container" class="grid grid-cols-1 gap-4">
                    <!-- Op√ß√µes injetadas via JS -->
                </div>
                
                <div class="mt-8 flex justify-center">
                    <button id="btn-next" disabled class="bg-slate-300 text-white px-10 py-3 rounded-full font-bold cursor-not-allowed transition">Avan√ßar</button>
                </div>
            </div>
        </section>

        <!-- SECTION: RESULTADO -->
        <section id="section-resultado" class="hidden-section fade-in">
            <div class="max-w-5xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
                <div class="bg-white p-8 rounded-2xl shadow-lg border border-slate-100">
                    <h2 class="text-2xl font-bold mb-6">Seu Perfil Comportamental</h2>
                    <canvas id="chart-resultado" class="mb-6"></canvas>
                    <div class="flex justify-center gap-4">
                        <button onclick="downloadPDF()" class="bg-red-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-red-700">Baixar PDF</button>
                        <button onclick="showSection('home')" class="bg-slate-200 text-slate-700 px-6 py-2 rounded-lg font-bold hover:bg-slate-300">Voltar ao In√≠cio</button>
                    </div>
                </div>
                
                <div class="space-y-6">
                    <div class="bg-white p-6 rounded-2xl shadow-md border-l-8 border-pantone-blue">
                        <h3 class="font-bold text-xl mb-3">Dicas para o seu Perfil Dominante</h3>
                        <p id="perfil-info" class="text-slate-600 text-sm leading-relaxed"></p>
                    </div>
                    <div class="bg-slate-50 p-6 rounded-2xl border border-dashed border-slate-300">
                        <h3 class="font-bold text-lg mb-2">Como desenvolver outros perfis?</h3>
                        <p class="text-slate-600 text-sm">O equil√≠brio √© a chave. Procure observar as caracter√≠sticas que obteve menor pontua√ß√£o e pratique-as em pequenos desafios di√°rios.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION: DASHBOARD -->
        <section id="section-dashboard" class="hidden-section fade-in">
            <h2 class="text-3xl font-bold mb-8 text-pantone-blue">Hist√≥rico de Resultados</h2>
            <div id="dashboard-empty" class="text-center py-20 bg-white rounded-2xl shadow-inner hidden">
                <p class="text-slate-400">Nenhum resultado encontrado ainda.</p>
            </div>
            <div id="dashboard-content" class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2 bg-white p-6 rounded-2xl shadow-sm">
                    <canvas id="chart-dashboard-history"></canvas>
                </div>
                <div id="history-list" class="space-y-4 max-h-[500px] overflow-y-auto pr-2">
                    <!-- Itens do hist√≥rico -->
                </div>
            </div>
        </section>

    </main>

    <!-- FOOTER -->
    <footer class="bg-slate-900 text-white pt-12 pb-6 px-6 mt-20">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between gap-10">
            <div>
                <h4 class="font-bold text-xl mb-4">Gest√£o de Pessoas e Melhoria de Processos</h4>
                <p class="text-sm opacity-60">Secretaria de Habita√ß√£o de Mogi das Cruzes</p>
            </div>
            <div class="bg-slate-800 p-6 rounded-xl flex-1 max-w-md">
                <h5 class="font-bold mb-4">O que achou deste portal?</h5>
                <div class="flex gap-2 mb-4" id="star-rating">
                    <span class="cursor-pointer text-2xl opacity-30 hover:opacity-100 transition" onclick="setRate(1)">‚òÖ</span>
                    <span class="cursor-pointer text-2xl opacity-30 hover:opacity-100 transition" onclick="setRate(2)">‚òÖ</span>
                    <span class="cursor-pointer text-2xl opacity-30 hover:opacity-100 transition" onclick="setRate(3)">‚òÖ</span>
                    <span class="cursor-pointer text-2xl opacity-30 hover:opacity-100 transition" onclick="setRate(4)">‚òÖ</span>
                    <span class="cursor-pointer text-2xl opacity-30 hover:opacity-100 transition" onclick="setRate(5)">‚òÖ</span>
                </div>
                <textarea class="w-full bg-slate-700 border-none rounded-lg p-3 text-sm focus:ring-2 focus:ring-pantone-blue" placeholder="Deixe um coment√°rio..." rows="2"></textarea>
                <button onclick="alert('Feedback enviado! Obrigado.')" class="mt-3 bg-pantone-blue px-6 py-2 rounded font-bold text-sm w-full">Enviar Feedback</button>
            </div>
        </div>
        <div class="border-t border-white/10 mt-12 pt-6 text-center text-xs opacity-40">
            ¬© 2024 Prefeitura de Mogi das Cruzes. Desenvolvido para RH.
        </div>
    </footer>

    <!-- LOGIC -->
    <script>
        // DATA
        const perguntas = [
            { o: ["Decidido", "Entusiasta", "Am√°vel", "Cuidadoso"], p: ["D", "I", "S", "C"] },
            { o: ["Competitivo", "Animado", "Paciente", "Preciso"], p: ["D", "I", "S", "C"] },
            { o: ["Ousado", "Soci√°vel", "Est√°vel", "L√≥gico"], p: ["D", "I", "S", "C"] },
            { o: ["Direto", "Influenciador", "Gentil", "Disciplinado"], p: ["D", "I", "S", "C"] },
            { o: ["Empreendedor", "Eloquente", "Previs√≠vel", "Anal√≠tico"], p: ["D", "I", "S", "C"] },
            { o: ["Auto-confiante", "Persuasivo", "Sereno", "Perfeccionista"], p: ["D", "I", "S", "C"] },
            { o: ["Vigoroso", "Expressivo", "Cooperativo", "Sistem√°tico"], p: ["D", "I", "S", "C"] },
            { o: ["Pioneiro", "Extrovertido", "Acolhedor", "Exato"], p: ["D", "I", "S", "C"] },
            { o: ["R√°pido", "Comunicativo", "Conciliador", "Detalhista"], p: ["D", "I", "S", "C"] },
            { o: ["Focado em resultados", "Magn√©tico", "Leal", "Convencional"], p: ["D", "I", "S", "C"] },
            { o: ["Independente", "Otimista", "Calmo", "Objetivo"], p: ["D", "I", "S", "C"] },
            { o: ["Firme", "Espirituoso", "Bondoso", "Cauteloso"], p: ["D", "I", "S", "C"] },
            { o: ["Assertivo", "Popular", "Modesto", "Organizado"], p: ["D", "I", "S", "C"] },
            { o: ["Intr√©pido", "Alegre", "Apoia os outros", "Estrat√©gico"], p: ["D", "I", "S", "C"] },
            { o: ["Comandante", "Divertido", "Resiliente", "Rigoroso"], p: ["D", "I", "S", "C"] },
            { o: ["Pragm√°tico", "Radiante", "Flex√≠vel", "Met√≥dico"], p: ["D", "I", "S", "C"] },
            { o: ["Dominante", "Amig√°vel", "Tolerante", "Especialista"], p: ["D", "I", "S", "C"] },
            { o: ["L√≠der", "Inspirador", "Ouvinte", "Meticuloso"], p: ["D", "I", "S", "C"] },
            { o: ["Obstinado", "Encantador", "Harmonioso", "Factual"], p: ["D", "I", "S", "C"] },
            { o: ["Eficaz", "Din√¢mico", "Constante", "Questionador"], p: ["D", "I", "S", "C"] },
            { o: ["Inovador", "Impulsivo", "Satisfeito", "Cr√≠tico"], p: ["D", "I", "S", "C"] },
            { o: ["Corajoso", "Confiante", "Discreto", "Disciplinado"], p: ["D", "I", "S", "C"] },
            { o: ["Ativo", "Estimulante", "Prestativo", "Observador"], p: ["D", "I", "S", "C"] },
            { o: ["Executor", "Influente", "Paciente", "Zeloso"], p: ["D", "I", "S", "C"] },
            { o: ["Intense", "Gosta de grupos", "Tranquilo", "Racional"], p: ["D", "I", "S", "C"] },
            { o: ["Forte", "Charmoso", "Manso", "Imparcial"], p: ["D", "I", "S", "C"] },
            { o: ["Direcionado", "Brilhante", "Mediador", "Fiel"], p: ["D", "I", "S", "C"] },
            { o: ["Determinado", "Expansivo", "Ponderado", "Escrupuloso"], p: ["D", "I", "S", "C"] },
            { o: ["Audaz", "Convincente", "Suave", "Te√≥rico"], p: ["D", "I", "S", "C"] },
            { o: ["Autorit√°rio", "Espont√¢neo", "Saci√°vel", "Did√°tico"], p: ["D", "I", "S", "C"] },
            { o: ["R√°pido para agir", "R√°pido para falar", "R√°pido para ajudar", "R√°pido para pensar"], p: ["D", "I", "S", "C"] },
            { o: ["Exigente", "Descontra√≠do", "Solid√°rio", "Formal"], p: ["D", "I", "S", "C"] },
            { o: ["Aventureiro", "Entusiasta", "Composto", "S√©rio"], p: ["D", "I", "S", "C"] },
            { o: ["Argumentativo", "Apaixonante", "Amig√°vel", "Prudente"], p: ["D", "I", "S", "C"] },
            { o: ["Decisivo", "Persuasivo", "Est√°vel", "Anal√≠tico"], p: ["D", "I", "S", "C"] },
            { o: ["Auto-suficiente", "Soci√°vel", "Pac√≠fico", "Diplomata"], p: ["D", "I", "S", "C"] },
            { o: ["Arrojado", "Comunicativo", "Submisso", "Acurado"], p: ["D", "I", "S", "C"] },
            { o: ["Direto", "Cativante", "Met√≥dico", "Reservado"], p: ["D", "I", "S", "C"] },
            { o: ["Competitivo", "Energ√©tico", "Relutante", "Introvertido"], p: ["D", "I", "S", "C"] },
            { o: ["Resolvedor", "Facilitador", "Apoiador", "Investigador"], p: ["D", "I", "S", "C"] }
        ];

        const perfilDicas = {
            D: "Voc√™ √© focado em resultados e metas. Aproveite sua proatividade para liderar projetos, mas tome cuidado para n√£o ser visto como impaciente. Desenvolva a escuta ativa.",
            I: "Sua habilidade de comunica√ß√£o e otimismo s√£o contagiantes. Use isso para engajar equipes, mas tente manter o foco em detalhes t√©cnicos e prazos.",
            S: "Voc√™ √© o pilar de estabilidade e confian√ßa da equipe. √ìtimo em processos de longo prazo. Procure ser mais assertivo em tomadas de decis√£o r√°pidas.",
            C: "Sua precis√£o e an√°lise garantem a qualidade. Perfeito para auditorias e planejamento t√©cnico. Tente ser menos cr√≠tico consigo mesmo e com os outros."
        };

        // STATE
        let currentQuestion = 0;
        let respostasUsuario = [];
        let selectedOption = null;
        let chartInstance = null;
        let dashChartInstance = null;

        // SPA ROUTING
        function showSection(id) {
            document.querySelectorAll('main section').forEach(s => s.classList.add('hidden-section'));
            document.getElementById(`section-${id}`).classList.remove('hidden-section');
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            if (id === 'dashboard') loadDashboard();
            if (id === 'teste') resetTest();
        }

        // TEST LOGIC
        function resetTest() {
            currentQuestion = 0;
            respostasUsuario = [];
            renderQuestion();
        }

        function renderQuestion() {
            const q = perguntas[currentQuestion];
            const container = document.getElementById('options-container');
            const progressText = document.getElementById('progress-text');
            const progressBar = document.getElementById('progress-bar');
            const btnNext = document.getElementById('btn-next');

            progressText.innerText = `Quest√£o ${currentQuestion + 1} de 40`;
            progressBar.style.width = `${((currentQuestion + 1) / 40) * 100}%`;
            btnNext.disabled = true;
            btnNext.classList.replace('bg-pantone-blue', 'bg-slate-300');
            btnNext.classList.add('cursor-not-allowed');

            container.innerHTML = '';
            
            // Randomizar op√ß√µes apenas visualmente para evitar vi√©s de posi√ß√£o
            const indices = [0, 1, 2, 3];
            indices.forEach(idx => {
                const button = document.createElement('button');
                button.className = "p-4 text-left border-2 border-slate-200 rounded-xl hover:bg-slate-50 transition-all font-medium flex justify-between items-center group";
                button.innerHTML = `<span>${q.o[idx]}</span> <div class="w-6 h-6 rounded-full border-2 border-slate-200 group-[.selected]:bg-pantone-blue group-[.selected]:border-pantone-blue"></div>`;
                button.onclick = () => selectOption(button, q.p[idx]);
                container.appendChild(button);
            });

            btnNext.onclick = nextQuestion;
        }

        function selectOption(el, value) {
            document.querySelectorAll('#options-container button').forEach(b => b.classList.remove('selected', 'border-pantone-blue'));
            el.classList.add('selected', 'border-pantone-blue');
            selectedOption = value;
            
            const btnNext = document.getElementById('btn-next');
            btnNext.disabled = false;
            btnNext.classList.replace('bg-slate-300', 'bg-pantone-blue');
            btnNext.classList.remove('cursor-not-allowed');
        }

        function nextQuestion() {
            respostasUsuario.push(selectedOption);
            selectedOption = null;
            currentQuestion++;

            if (currentQuestion < perguntas.length) {
                renderQuestion();
            } else {
                finalizarTeste();
            }
        }

        function finalizarTeste() {
            const totais = { D: 0, I: 0, S: 0, C: 0 };
            respostasUsuario.forEach(res => totais[res]++);
            
            const total = perguntas.length;
            const porcentagens = {
                D: ((totais.D / total) * 100).toFixed(1),
                I: ((totais.I / total) * 100).toFixed(1),
                S: ((totais.S / total) * 100).toFixed(1),
                C: ((totais.C / total) * 100).toFixed(1)
            };

            // Determinar perfil dominante
            let dominante = 'D';
            if (parseFloat(porcentagens.I) > parseFloat(porcentagens[dominante])) dominante = 'I';
            if (parseFloat(porcentagens.S) > parseFloat(porcentagens[dominante])) dominante = 'S';
            if (parseFloat(porcentagens.C) > parseFloat(porcentagens[dominante])) dominante = 'C';

            // Guardar no storage
            const historico = JSON.parse(localStorage.getItem('disc_results') || '[]');
            historico.push({
                data: new Date().toLocaleDateString('pt-BR'),
                dominante: dominante,
                pontos: porcentagens
            });
            localStorage.setItem('disc_results', JSON.stringify(historico));

            // UI
            document.getElementById('perfil-info').innerText = perfilDicas[dominante];
            renderGrafico(porcentagens);
            showSection('resultado');
            
            setTimeout(() => {
                const container = document.createElement('div');
                container.className = "fixed inset-0 bg-black/50 flex items-center justify-center z-[100] fade-in";
                container.innerHTML = `<div class="bg-white p-10 rounded-3xl text-center shadow-2xl">
                    <div class="text-6xl mb-4">üéâ</div>
                    <h2 class="text-2xl font-bold mb-2">Obrigado!</h2>
                    <p class="text-slate-500">Parab√©ns por sua participa√ß√£o!</p>
                </div>`;
                document.body.appendChild(container);
                setTimeout(() => {
                    container.remove();
                    showSection('home');
                }, 3000);
            }, 500);
        }

        function renderGrafico(data) {
            const ctx = document.getElementById('chart-resultado').getContext('2d');
            if (chartInstance) chartInstance.destroy();

            chartInstance = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Domin√¢ncia', 'Influ√™ncia', 'Estabilidade', 'Conformidade'],
                    datasets: [{
                        label: 'Seu Perfil %',
                        data: [data.D, data.I, data.S, data.C],
                        backgroundColor: 'rgba(0, 51, 160, 0.2)',
                        borderColor: '#0033A0',
                        borderWidth: 3,
                        pointBackgroundColor: '#0033A0'
                    }]
                },
                options: {
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: { stepSize: 20 }
                        }
                    }
                }
            });
        }

        // DASHBOARD
        function loadDashboard() {
            const historico = JSON.parse(localStorage.getItem('disc_results') || '[]');
            const list = document.getElementById('history-list');
            const empty = document.getElementById('dashboard-empty');
            const content = document.getElementById('dashboard-content');

            if (historico.length === 0) {
                empty.classList.remove('hidden');
                content.classList.add('hidden');
                return;
            }

            empty.classList.add('hidden');
            content.classList.remove('hidden');

            list.innerHTML = historico.reverse().map((h, i) => `
                <div class="bg-slate-50 p-4 rounded-xl border border-slate-200 flex justify-between items-center">
                    <div>
                        <div class="text-xs font-bold text-slate-400">${h.data}</div>
                        <div class="font-bold text-lg">Perfil: ${h.dominante}</div>
                    </div>
                    <div class="flex gap-1">
                        <span class="w-3 h-3 rounded-full ${parseFloat(h.pontos.D) > 25 ? 'bg-red-500' : 'bg-slate-300'}"></span>
                        <span class="w-3 h-3 rounded-full ${parseFloat(h.pontos.I) > 25 ? 'bg-yellow-500' : 'bg-slate-300'}"></span>
                        <span class="w-3 h-3 rounded-full ${parseFloat(h.pontos.S) > 25 ? 'bg-green-500' : 'bg-slate-300'}"></span>
                        <span class="w-3 h-3 rounded-full ${parseFloat(h.pontos.C) > 25 ? 'bg-blue-500' : 'bg-slate-300'}"></span>
                    </div>
                </div>
            `).join('');

            // Gr√°fico de evolu√ß√£o (Barras)
            const ctxDash = document.getElementById('chart-dashboard-history').getContext('2d');
            if (dashChartInstance) dashChartInstance.destroy();

            const last5 = historico.slice(-5);
            dashChartInstance = new Chart(ctxDash, {
                type: 'bar',
                data: {
                    labels: last5.map(h => h.data),
                    datasets: [
                        { label: 'D', data: last5.map(h => h.pontos.D), backgroundColor: '#EF4444' },
                        { label: 'I', data: last5.map(h => h.pontos.I), backgroundColor: '#F59E0B' },
                        { label: 'S', data: last5.map(h => h.pontos.S), backgroundColor: '#10B981' },
                        { label: 'C', data: last5.map(h => h.pontos.C), backgroundColor: '#3B82F6' }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: { title: { display: true, text: '√öltimos 5 Resultados' } },
                    scales: { y: { beginAtZero: true, max: 100 } }
                }
            });
        }

        // EXPORT
        async function downloadPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const historico = JSON.parse(localStorage.getItem('disc_results') || '[]');
            const result = historico[historico.length - 1];

            doc.setFontSize(22);
            doc.text("Relat√≥rio de Perfil DISC", 20, 20);
            doc.setFontSize(12);
            doc.text(`Data: ${result.data}`, 20, 30);
            doc.text("Secretaria Municipal de Habita√ß√£o e Regulariza√ß√£o Fundi√°ria - Mogi das Cruzes", 20, 38);
            
            doc.setFontSize(16);
            doc.text(`Perfil Dominante: ${result.dominante}`, 20, 55);
            
            doc.setFontSize(12);
            doc.text("Pontua√ß√µes:", 20, 70);
            doc.text(`- Domin√¢ncia: ${result.pontos.D}%`, 30, 80);
            doc.text(`- Influ√™ncia: ${result.pontos.I}%`, 30, 90);
            doc.text(`- Estabilidade: ${result.pontos.S}%`, 30, 100);
            doc.text(`- Conformidade: ${result.pontos.C}%`, 30, 110);

            doc.text("Dica Profissional:", 20, 130);
            const splitText = doc.splitTextToSize(perfilDicas[result.dominante], 170);
            doc.text(splitText, 20, 140);

            doc.save(`Resultado_DISC_${result.data.replace(/\//g,'-')}.pdf`);
        }

        function setRate(stars) {
            const starElements = document.querySelectorAll('#star-rating span');
            starElements.forEach((el, i) => {
                el.style.opacity = i < stars ? '1' : '0.3';
                el.style.color = i < stars ? 'var(--pantone-yellow)' : 'white';
            });
        }
    </script>
    <script>
const menuBtn = document.getElementById('menu-btn');
const menu = document.getElementById('menu');

menuBtn.addEventListener('click', () => {
    menu.classList.toggle('hidden');
});
</script>
</body>
</html>
